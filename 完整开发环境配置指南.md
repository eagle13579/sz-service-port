# 数智服务港 - 完整开发环境配置指南

## 📋 配置清单

我已经为您启动了后端和前端服务的安装进程。请按照以下步骤完成配置。

---

## ✅ 已完成的配置

### 1. 配置文件已创建 ✅
- `unified-backend/.env` - 后端配置文件已创建

### 2. 服务已启动 ✅
- 后端服务窗口: 正在安装依赖并启动 (端口 3002)
- 前端服务窗口: 正在安装依赖并启动 (端口 5173)

---

## 🔧 需要手动完成的步骤

### 步骤 1: 配置 MySQL 数据库

#### 选项 A: 如果您已安装 MySQL

1. **检查 MySQL 服务是否运行**
   ```powershell
   # 方法1: 检查服务状态
   Get-Service -Name MySQL* | Select-Object Name, Status

   # 方法2: 检查端口
   netstat -ano | findstr "3306"
   ```

2. **创建数据库**
   ```bash
   # 打开命令行，登录 MySQL
   mysql -u root -p

   # 创建数据库
   CREATE DATABASE shuzhi_service_hub
     DEFAULT CHARACTER SET utf8mb4
     COLLATE utf8mb4_unicode_ci;

   # 退出
   exit
   ```

3. **执行初始化脚本**
   ```bash
   cd "c:/Users/56867/CodeBuddy/数智服务港/官网"
   mysql -u root -p shuzhi_service_hub < unified-database-init.sql
   ```

4. **导入测试数据 (可选)**
   ```bash
   mysql -u root -p shuzhi_service_hub < test-data.sql
   ```

#### 选项 B: 如果您使用 XAMPP

1. **启动 MySQL**
   - 打开 XAMPP Control Panel
   - 点击 MySQL 旁边的 Start 按钮

2. **使用 phpMyAdmin 创建数据库**
   - 访问: http://localhost/phpmyadmin
   - 点击"新建"
   - 数据库名: `shuzhi_service_hub`
   - 排序规则: `utf8mb4_unicode_ci`
   - 点击"创建"

3. **导入初始化脚本**
   - 选择数据库 `shuzhi_service_hub`
   - 点击"导入"
   - 选择文件: `unified-database-init.sql`
   - 点击"执行"

#### 选项 C: 如果您使用 Docker

```powershell
# 运行 MySQL 容器
docker run -d -p 3306:3306 --name mysql ^
  -e MYSQL_ROOT_PASSWORD=root123 ^
  -e MYSQL_DATABASE=shuzhi_service_hub ^
  mysql:8.0

# 执行初始化脚本
docker exec -i mysql mysql -uroot -proot123 shuzhi_service_hub < unified-database-init.sql
```

#### 选项 D: 如果您未安装 MySQL

**快速安装方案**:

1. **下载 XAMPP (推荐)**
   - 访问: https://www.apachefriends.org/
   - 下载并安装
   - 启动 MySQL 服务

2. **或下载 MySQL Community Server**
   - 访问: https://dev.mysql.com/downloads/mysql/
   - 安装并配置

---

### 步骤 2: 验证后端服务

#### 检查后端服务是否正常

**打开后端服务窗口**，查看是否显示:
```
✅ 服务器运行在 http://localhost:3002
```

**测试健康检查**:
```powershell
curl http://localhost:3002/health
```

**期望响应**:
```json
{
  "status": "ok",
  "message": "数智服务港统一后端服务运行正常",
  "database": "connected"
}
```

**如果显示数据库连接失败**:
- 确认 MySQL 已启动
- 确认数据库已创建
- 确认 .env 配置正确

---

### 步骤 3: 验证前端服务

#### 检查前端服务是否正常

**打开前端服务窗口**，查看是否显示:
```
✅ VITE dev server running at:
   - Local: http://localhost:5173/
```

**访问前端页面**:
```
http://localhost:5173
```

**如果显示错误**:
- 检查依赖是否安装完成
- 等待依赖安装完成 (可能需要 2-3 分钟)

---

### 步骤 4: 访问系统

#### 服务地址

| 服务 | 地址 | 说明 |
|------|------|------|
| **前端开发服务器** | http://localhost:5173 | Vue.js 开发环境 |
| **后端 API 服务** | http://localhost:3002 | Express API 服务 |
| **本地预览** | http://localhost:8080 | HTML 静态预览 |

---

## 📁 配置文件位置

### 后端配置
```
unified-backend/.env
```

**当前配置**:
```env
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=
DB_NAME=shuzhi_service_hub
JWT_SECRET=shuzhi_service_hub_jwt_secret_key_2026_change_in_production
JWT_EXPIRES_IN=24h
PORT=3002
NODE_ENV=development
UPLOAD_PATH=./uploads
API_PREFIX=/api
```

**如果您的 MySQL 密码不是空的，请修改**:
```env
DB_PASSWORD=your_actual_password
```

---

## 🔍 故障排查

### 问题 1: 后端显示数据库连接失败

**检查项**:
1. MySQL 服务是否运行?
   ```powershell
   Get-Service -Name MySQL*
   ```

2. 数据库是否创建?
   ```bash
   mysql -u root -p
   SHOW DATABASES;
   ```

3. .env 配置是否正确?
   - 检查 `DB_HOST`, `DB_PORT`, `DB_USER`, `DB_PASSWORD`, `DB_NAME`

4. 防火墙是否阻止连接?
   - 检查 Windows 防火墙设置

### 问题 2: 前端安装依赖失败

**解决方案**:
```bash
cd unified-frontend
rm -rf node_modules package-lock.json
npm install
```

### 问题 3: 端口被占用

**检查端口占用**:
```powershell
netstat -ano | findstr "3002"
netstat -ano | findstr "5173"
```

**结束进程**:
```powershell
taskkill /PID <进程ID> /F
```

---

## 🚀 快速启动脚本

我已经为您准备了以下脚本:

| 脚本 | 用途 |
|------|------|
| `start-system.bat` | 启动完整系统 |
| `setup-database.bat` | 初始化数据库 |
| `test-start.bat` | 测试服务状态 |
| `preview-local.bat` | 本地预览主页 |

---

## 📚 相关文档

- `setup-database-manual.md` - 数据库手动配置详细指南
- `前端启动测试报告.md` - 前端测试报告
- `README.md` - 项目说明

---

## ✅ 配置完成检查清单

完成以下所有项后，您的开发环境就配置完成了!

- [ ] MySQL 已安装并运行
- [ ] 数据库 `shuzhi_service_hub` 已创建
- [ ] 初始化脚本 `unified-database-init.sql` 已执行
- [ ] 测试数据 `test-data.sql` 已导入 (可选)
- [ ] 后端服务窗口显示启动成功
- [ ] `curl http://localhost:3002/health` 返回成功
- [ ] 前端服务窗口显示启动成功
- [ ] 访问 http://localhost:5173 页面正常显示

---

## 🎯 下一步

配置完成后:

1. **访问前端**: http://localhost:5173
2. **测试功能**: 注册、登录、查看数据
3. **开始开发**: 修改代码实时预览

---

**配置窗口正在运行中，请按照上述步骤完成数据库配置！** 🚀
