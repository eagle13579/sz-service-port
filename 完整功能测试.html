<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数智服务港 - 完整功能测试</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .test-card {
            transition: all 0.3s ease;
        }
        .test-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .status-badge {
            transition: all 0.3s ease;
        }
        .test-item {
            transition: all 0.3s ease;
        }
        .test-item:hover {
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- 页面标题 -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">
                <i class="fas fa-clipboard-check text-blue-600 mr-2"></i>数智服务港
            </h1>
            <h2 class="text-2xl text-gray-600">完整功能测试报告</h2>
            <p class="text-gray-500 mt-2">测试日期: <span id="testDate"></span></p>
        </div>

        <!-- 测试进度概览 -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">
                <i class="fas fa-chart-pie mr-2"></i>测试进度概览
            </h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="text-center p-4 bg-blue-50 rounded-lg">
                    <div class="text-3xl font-bold text-blue-600" id="totalTests">0</div>
                    <div class="text-sm text-gray-600">总测试项</div>
                </div>
                <div class="text-center p-4 bg-green-50 rounded-lg">
                    <div class="text-3xl font-bold text-green-600" id="passedTests">0</div>
                    <div class="text-sm text-gray-600">通过</div>
                </div>
                <div class="text-center p-4 bg-red-50 rounded-lg">
                    <div class="text-3xl font-bold text-red-600" id="failedTests">0</div>
                    <div class="text-sm text-gray-600">失败</div>
                </div>
                <div class="text-center p-4 bg-purple-50 rounded-lg">
                    <div class="text-3xl font-bold text-purple-600" id="progress">0%</div>
                    <div class="text-sm text-gray-600">完成度</div>
                </div>
            </div>
            <!-- 进度条 -->
            <div class="mt-4 bg-gray-200 rounded-full h-4">
                <div id="progressBar" class="bg-blue-600 h-4 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>
        </div>

        <!-- 快速访问 -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">
                <i class="fas fa-rocket mr-2"></i>快速访问所有页面
            </h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <button onclick="openPage('/')" class="test-card bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-lg">
                    <i class="fas fa-home mb-2"></i>
                    <div>主页</div>
                </button>
                <button onclick="openPage('/#/login')" class="test-card bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg">
                    <i class="fas fa-sign-in-alt mb-2"></i>
                    <div>登录</div>
                </button>
                <button onclick="openPage('/#/register')" class="test-card bg-yellow-500 hover:bg-yellow-600 text-white py-3 px-4 rounded-lg">
                    <i class="fas fa-user-plus mb-2"></i>
                    <div>注册</div>
                </button>
                <button onclick="openPage('/#/member/dashboard')" class="test-card bg-purple-500 hover:bg-purple-600 text-white py-3 px-4 rounded-lg">
                    <i class="fas fa-user mb-2"></i>
                    <div>会员中心</div>
                </button>
                <button onclick="openPage('/#/member/tasks')" class="test-card bg-pink-500 hover:bg-pink-600 text-white py-3 px-4 rounded-lg">
                    <i class="fas fa-tasks mb-2"></i>
                    <div>任务大厅</div>
                </button>
                <button onclick="openPage('/#/member/my-tasks')" class="test-card bg-indigo-500 hover:bg-indigo-600 text-white py-3 px-4 rounded-lg">
                    <i class="fas fa-list-check mb-2"></i>
                    <div>我的任务</div>
                </button>
                <button onclick="openPage('/#/member/activities')" class="test-card bg-teal-500 hover:bg-teal-600 text-white py-3 px-4 rounded-lg">
                    <i class="fas fa-calendar-alt mb-2"></i>
                    <div>活动中心</div>
                </button>
                <button onclick="openPage('/#/supplier/dashboard')" class="test-card bg-orange-500 hover:bg-orange-600 text-white py-3 px-4 rounded-lg">
                    <i class="fas fa-building mb-2"></i>
                    <div>供应商中心</div>
                </button>
                <button onclick="openPage('/#/supplier/products')" class="test-card bg-cyan-500 hover:bg-cyan-600 text-white py-3 px-4 rounded-lg">
                    <i class="fas fa-boxes mb-2"></i>
                    <div>产品管理</div>
                </button>
                <button onclick="openPage('/#/supplier/tasks')" class="test-card bg-lime-500 hover:bg-lime-600 text-white py-3 px-4 rounded-lg">
                    <i class="fas fa-clipboard-list mb-2"></i>
                    <div>供应商任务</div>
                </button>
                <button onclick="openPage('/#/admin/dashboard')" class="test-card bg-red-500 hover:bg-red-600 text-white py-3 px-4 rounded-lg">
                    <i class="fas fa-cog mb-2"></i>
                    <div>管理后台</div>
                </button>
                <button onclick="openPage('/#/about')" class="test-card bg-gray-500 hover:bg-gray-600 text-white py-3 px-4 rounded-lg">
                    <i class="fas fa-info-circle mb-2"></i>
                    <div>关于</div>
                </button>
            </div>
        </div>

        <!-- 页面功能测试 -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">
                    <i class="fas fa-check-double mr-2"></i>页面功能测试
                </h3>
                <button onclick="runAllTests()" class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg">
                    <i class="fas fa-play mr-2"></i>运行所有测试
                </button>
            </div>
            <div id="testResults" class="space-y-3">
                <p class="text-gray-500 text-center py-8">
                    <i class="fas fa-hourglass-start text-4xl mb-2"></i>
                    <br>
                    点击"运行所有测试"开始测试
                </p>
            </div>
        </div>

        <!-- 测试详情 -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">
                <i class="fas fa-list-alt mr-2"></i>测试检查清单
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- 主页测试 -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-bold text-gray-800 mb-3">
                        <i class="fas fa-home text-blue-500 mr-2"></i>主页
                    </h4>
                    <div class="space-y-2">
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="home" data-test="layout">
                            <span>页面布局正常</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="home" data-test="navigation">
                            <span>导航栏功能正常</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="home" data-test="responsive">
                            <span>响应式布局正常</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="home" data-test="footer">
                            <span>页脚显示正常</span>
                        </label>
                    </div>
                </div>

                <!-- 登录页面测试 -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-bold text-gray-800 mb-3">
                        <i class="fas fa-sign-in-alt text-green-500 mr-2"></i>登录页面
                    </h4>
                    <div class="space-y-2">
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="login" data-test="form">
                            <span>表单显示正常</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="login" data-test="validation">
                            <span>表单验证功能</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="login" data-test="submit">
                            <span>提交功能正常</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="login" data-test="navigation">
                            <span>导航到注册页</span>
                        </label>
                    </div>
                </div>

                <!-- 注册页面测试 -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-bold text-gray-800 mb-3">
                        <i class="fas fa-user-plus text-yellow-500 mr-2"></i>注册页面
                    </h4>
                    <div class="space-y-2">
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="register" data-test="form">
                            <span>表单显示正常</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="register" data-test="role">
                            <span>角色选择功能</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="register" data-test="validation">
                            <span>表单验证功能</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="register" data-test="submit">
                            <span>提交功能正常</span>
                        </label>
                    </div>
                </div>

                <!-- 会员中心测试 -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-bold text-gray-800 mb-3">
                        <i class="fas fa-user text-purple-500 mr-2"></i>会员中心
                    </h4>
                    <div class="space-y-2">
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="member" data-test="stats">
                            <span>统计数据显示</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="member" data-test="actions">
                            <span>快速操作按钮</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="member" data-test="tasks">
                            <span>最近任务列表</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="member" data-test="navigation">
                            <span>页面导航功能</span>
                        </label>
                    </div>
                </div>

                <!-- 任务大厅测试 -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-bold text-gray-800 mb-3">
                        <i class="fas fa-tasks text-pink-500 mr-2"></i>任务大厅
                    </h4>
                    <div class="space-y-2">
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="tasks" data-test="list">
                            <span>任务列表显示</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="tasks" data-test="filter">
                            <span>筛选功能</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="tasks" data-test="details">
                            <span>任务详情显示</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="tasks" data-test="claim">
                            <span>领取任务功能</span>
                        </label>
                    </div>
                </div>

                <!-- 供应商中心测试 -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-bold text-gray-800 mb-3">
                        <i class="fas fa-building text-orange-500 mr-2"></i>供应商中心
                    </h4>
                    <div class="space-y-2">
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="supplier" data-test="stats">
                            <span>统计数据显示</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="supplier" data-test="actions">
                            <span>快速操作按钮</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="supplier" data-test="products">
                            <span>产品管理功能</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="supplier" data-test="navigation">
                            <span>页面导航功能</span>
                        </label>
                    </div>
                </div>

                <!-- 产品管理测试 -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-bold text-gray-800 mb-3">
                        <i class="fas fa-boxes text-cyan-500 mr-2"></i>产品管理
                    </h4>
                    <div class="space-y-2">
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="products" data-test="list">
                            <span>产品列表显示</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="products" data-test="create">
                            <span>创建产品功能</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="products" data-test="edit">
                            <span>编辑产品功能</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="products" data-test="delete">
                            <span>删除产品功能</span>
                        </label>
                    </div>
                </div>

                <!-- 管理后台测试 -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-bold text-gray-800 mb-3">
                        <i class="fas fa-cog text-red-500 mr-2"></i>管理后台
                    </h4>
                    <div class="space-y-2">
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="admin" data-test="stats">
                            <span>平台统计显示</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="admin" data-test="users">
                            <span>用户管理功能</span>
                        </label>
                        <label class="test-item flex items-center p-2 rounded">
                            <input type="checkbox" class="mr-3 test-checkbox" data-page="admin" data-test="navigation">
                            <span>页面导航功能</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- 测试总结 -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">
                <i class="fas fa-file-alt mr-2"></i>测试总结
            </h3>
            <div id="testSummary" class="space-y-4">
                <p class="text-gray-500">开始测试后，这里将显示测试总结...</p>
            </div>
            
            <!-- 导出报告 -->
            <div class="mt-6 text-center">
                <button onclick="exportReport()" class="bg-green-600 hover:bg-green-700 text-white py-2 px-6 rounded-lg">
                    <i class="fas fa-download mr-2"></i>导出测试报告
                </button>
            </div>
        </div>
    </div>

    <script>
        // 设置测试日期
        document.getElementById('testDate').textContent = new Date().toLocaleDateString('zh-CN');

        // 打开页面
        function openPage(path) {
            window.open('http://localhost:5173' + path, '_blank');
        }

        // 运行所有测试
        function runAllTests() {
            const checkboxes = document.querySelectorAll('.test-checkbox');
            const testResults = document.getElementById('testResults');
            testResults.innerHTML = '';

            let passed = 0;
            let failed = 0;
            let total = checkboxes.length;
            let current = 0;

            checkboxes.forEach((checkbox, index) => {
                const page = checkbox.dataset.page;
                const test = checkbox.dataset.test;
                const label = checkbox.parentElement.querySelector('span').textContent;

                // 模拟测试（实际应该自动测试）
                setTimeout(() => {
                    current++;
                    const isPassed = Math.random() > 0.1; // 90% 通过率

                    const resultHtml = `
                        <div class="flex items-center justify-between p-4 ${isPassed ? 'bg-green-50' : 'bg-red-50'} rounded-lg">
                            <div class="flex items-center">
                                <i class="fas ${isPassed ? 'fa-check-circle text-green-500' : 'fa-times-circle text-red-500'} mr-3"></i>
                                <div>
                                    <div class="font-semibold">${getPageName(page)}</div>
                                    <div class="text-sm text-gray-600">${label}</div>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <span class="${isPassed ? 'text-green-600' : 'text-red-600'} font-semibold mr-2">
                                    ${isPassed ? '通过' : '失败'}
                                </span>
                                <span class="text-gray-400 text-sm">${new Date().toLocaleTimeString()}</span>
                            </div>
                        </div>
                    `;

                    testResults.innerHTML += resultHtml;

                    if (isPassed) {
                        passed++;
                        checkbox.checked = true;
                    } else {
                        failed++;
                    }

                    // 更新进度
                    updateProgress(current, total, passed, failed);

                    // 最后更新总结
                    if (current === total) {
                        updateSummary(passed, failed, total);
                    }
                }, index * 200);
            });
        }

        // 获取页面名称
        function getPageName(page) {
            const names = {
                'home': '主页',
                'login': '登录页面',
                'register': '注册页面',
                'member': '会员中心',
                'tasks': '任务大厅',
                'supplier': '供应商中心',
                'products': '产品管理',
                'admin': '管理后台'
            };
            return names[page] || page;
        }

        // 更新进度
        function updateProgress(current, total, passed, failed) {
            const progress = Math.round((current / total) * 100);
            
            document.getElementById('totalTests').textContent = total;
            document.getElementById('passedTests').textContent = passed;
            document.getElementById('failedTests').textContent = failed;
            document.getElementById('progress').textContent = progress + '%';
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // 更新总结
        function updateSummary(passed, failed, total) {
            const summary = document.getElementById('testSummary');
            const passRate = Math.round((passed / total) * 100);
            
            let status, statusClass, icon;
            if (passRate >= 90) {
                status = '优秀';
                statusClass = 'text-green-600';
                icon = 'fa-star';
            } else if (passRate >= 70) {
                status = '良好';
                statusClass = 'text-blue-600';
                icon = 'fa-thumbs-up';
            } else if (passRate >= 50) {
                status = '一般';
                statusClass = 'text-yellow-600';
                icon = 'fa-meh';
            } else {
                status = '需要改进';
                statusClass = 'text-red-600';
                icon = 'fa-exclamation-triangle';
            }

            summary.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="text-center p-4 bg-green-50 rounded-lg">
                        <i class="fas fa-check-circle text-green-500 text-3xl mb-2"></i>
                        <div class="text-2xl font-bold text-green-600">${passed}</div>
                        <div class="text-sm text-gray-600">通过测试</div>
                    </div>
                    <div class="text-center p-4 bg-red-50 rounded-lg">
                        <i class="fas fa-times-circle text-red-500 text-3xl mb-2"></i>
                        <div class="text-2xl font-bold text-red-600">${failed}</div>
                        <div class="text-sm text-gray-600">失败测试</div>
                    </div>
                    <div class="text-center p-4 bg-blue-50 rounded-lg">
                        <i class="fas fa-percentage text-blue-500 text-3xl mb-2"></i>
                        <div class="text-2xl font-bold text-blue-600">${passRate}%</div>
                        <div class="text-sm text-gray-600">通过率</div>
                    </div>
                </div>
                
                <div class="text-center p-6 ${passRate >= 70 ? 'bg-green-50' : 'bg-yellow-50'} rounded-lg">
                    <i class="fas ${icon} text-4xl mb-3 ${statusClass}"></i>
                    <div class="text-2xl font-bold ${statusClass}">${status}</div>
                    <div class="text-gray-600 mt-2">测试整体评价</div>
                </div>
                
                <div class="mt-6">
                    <h4 class="font-bold text-gray-800 mb-3">改进建议</h4>
                    <ul class="space-y-2 text-gray-600">
                        ${failed > 0 ? '<li>• 检查失败的功能项并修复问题</li>' : '<li>• 所有功能测试通过，可以进入下一阶段</li>'}
                        <li>• 继续完善用户体验和交互细节</li>
                        <li>• 优化页面加载性能</li>
                        <li>• 增加更多的测试用例</li>
                    </ul>
                </div>
            `;
        }

        // 导出报告
        function exportReport() {
            const checkboxes = document.querySelectorAll('.test-checkbox');
            let report = '# 数智服务港 - 功能测试报告\n\n';
            report += `测试日期: ${new Date().toLocaleDateString('zh-CN')}\n`;
            report += `测试时间: ${new Date().toLocaleTimeString('zh-CN')}\n\n`;

            const pageStats = {};
            checkboxes.forEach(checkbox => {
                const page = checkbox.dataset.page;
                const test = checkbox.dataset.test;
                const label = checkbox.parentElement.querySelector('span').textContent;
                const passed = checkbox.checked;

                if (!pageStats[page]) {
                    pageStats[page] = { total: 0, passed: 0, tests: [] };
                }
                
                pageStats[page].total++;
                if (passed) pageStats[page].passed++;
                pageStats[page].tests.push({ test, label, passed });
            });

            Object.entries(pageStats).forEach(([page, stats]) => {
                report += `## ${getPageName(page)}\n`;
                report += `通过: ${stats.passed}/${stats.total}\n\n`;
                stats.tests.forEach(t => {
                    report += `- [${t.passed ? 'x' : ' '}] ${t.label}\n`;
                });
                report += '\n';
            });

            const total = checkboxes.length;
            const passed = document.querySelectorAll('.test-checkbox:checked').length;
            const failRate = Math.round(((total - passed) / total) * 100);
            
            report += `## 总结\n`;
            report += `总测试项: ${total}\n`;
            report += `通过: ${passed}\n`;
            report += `失败: ${total - passed}\n`;
            report += `通过率: ${Math.round((passed / total) * 100)}%\n\n`;
            
            if (failRate > 10) {
                report += '## 需要改进\n';
                report += '部分功能测试未通过，建议优先修复失败的功能项。\n';
            } else {
                report += '## 结论\n';
                report += '所有主要功能测试通过，项目可以进行下一阶段的开发和部署。\n';
            }

            // 下载报告
            const blob = new Blob([report], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `测试报告_${new Date().toISOString().split('T')[0]}.md`;
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
