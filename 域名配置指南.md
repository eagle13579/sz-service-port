# 云开发域名过期问题解决方案

## 问题描述

**错误码**: DEFAULT_DOMAIN_EXPIRED
**错误信息**: Default domain has expired

默认域名已过期，无法访问。这是腾讯云开发的限制，免费环境中的默认域名可能会过期。

---

## 解决方案

### 方案1：使用存储桶直接访问（推荐）

使用COS存储桶的直接URL访问，这个URL通常不会过期：

```
https://9a55-static-customer-8g4cr1e455633774-1355446610.cos.ap-shanghai.myqcloud.com/index.html
```

**特点**:
- ✅ URL稳定，不会过期
- ✅ 可以直接访问
- ⚠️ 需要配置CORS以支持跨域请求

### 方案2：配置自定义域名

在云开发控制台绑定自定义域名：

1. **登录云开发控制台**
   - 访问: https://console.cloud.tencent.com/tcb
   - 选择环境: customer-8g4cr1e455633774

2. **进入静态托管配置**
   - 左侧菜单 → 静态网站托管
   - 点击"域名管理"

3. **添加自定义域名**
   - 点击"添加域名"
   - 输入您的域名（需要已备案）
   - 选择域名类型：自有域名
   - 系统会生成CNAME记录

4. **配置DNS解析**
   - 登录您的域名服务商（如阿里云、腾讯云）
   - 添加CNAME记录
   - 主机记录: www（或其他）
   - 记录值: 系统提供的CNAME

5. **等待生效**
   - DNS解析通常需要10分钟-24小时
   - 生效后即可使用自定义域名访问

**示例**:
```
您的域名: www.yourdomain.com
CNAME指向: customer-8g4cr1e455633774.tcloudbaseapp.com
```

### 方案3：升级到付费版

将环境升级到付费版，可以获得：

- 稳定的默认域名
- 更多资源配额
- 更好的性能
- 优先技术支持

**升级步骤**:
1. 进入云开发控制台
2. 选择环境 → 环境设置
3. 点击"升级套餐"
4. 选择付费套餐并支付

### 方案4：使用其他云服务

如果云开发域名问题持续，可以考虑：

#### Vercel部署（推荐）
```bash
npm install -g vercel
cd unified-frontend
vercel
```

#### Netlify部署
```bash
npm install -g netlify-cli
cd unified-frontend
netlify deploy --prod
```

#### GitHub Pages
1. 将代码推送到GitHub
2. Settings → Pages
3. 选择main分支和root目录

---

## 当前可用的访问方式

### 1. COS存储桶直连URL
```
https://9a55-static-customer-8g4cr1e455633774-1355446610.cos.ap-shanghai.myqcloud.com/index.html
```

### 2. 预览域名（需要配置）
通过环境预览功能访问，通常不会过期。

---

## 推荐行动步骤

### 短期方案（立即可用）
使用COS存储桶直接访问URL。

### 中期方案（1-2天）
配置自定义域名：
1. 如果有已备案域名，绑定到云开发
2. 如果没有域名，购买并备案域名

### 长期方案（永久稳定）
考虑升级到付费版或使用其他稳定的部署平台。

---

## 技术细节

### 为什么会过期？

腾讯云开发免费环境的默认域名有以下限制：
1. **免费配额限制**: 免费环境的默认域名资源有限
2. **资源回收**: 长期未使用的资源可能会被回收
3. **版本升级**: 平台升级可能导致默认域名变化
4. **账户状态**: 账户状态变化会影响服务

### 如何避免过期？

1. **定期访问**: 保持资源活跃使用
2. **升级付费**: 购买付费套餐获得稳定服务
3. **绑定自定义域名**: 自有域名不会过期
4. **监控资源状态**: 定期检查服务状态

---

## 域名配置示例

### 腾讯云域名配置

如果使用腾讯云购买域名：

1. **购买域名**
   - 访问: https://dnspod.cloud.tencent.com/
   - 搜索并购买域名

2. **域名备案**（必需）
   - 准备身份证、营业执照等材料
   - 提交备案申请
   - 等待审核（1-20天）

3. **绑定到云开发**
   - 进入云开发控制台
   - 静态托管 → 域名管理 → 添加域名
   - 填写域名并确认

4. **DNS配置**
   - 腾讯云DNS控制台
   - 添加CNAME记录
   - 记录值: customer-8g4cr1e455633774.tcloudbaseapp.com

### 阿里云域名配置

如果使用阿里云域名：

1. **购买域名**
   - 访问: https://wanwang.aliyun.com/
   - 搜索并购买域名

2. **域名备案**
   - 准备材料并提交备案
   - 等待审核通过

3. **DNS配置**
   - 阿里云DNS控制台 → 域名解析
   - 添加记录 → 选择CNAME
   - 记录值: customer-8g4cr1e455633774.tcloudbaseapp.com

---

## 测试验证

配置完成后，使用以下命令测试：

```bash
# 测试域名解析
nslookup your-domain.com

# 测试HTTP访问
curl -I https://your-domain.com

# 查看证书信息
curl -vI https://your-domain.com
```

---

## 联系支持

如果问题持续存在：

- **云开发文档**: https://docs.cloudbase.net/
- **云开发社区**: https://cloud.tencent.com/developer/column
- **技术支持**: 400-910-0100
- **工单系统**: https://console.cloud.tencent.com/workorder

---

## 总结

| 方案 | 优点 | 缺点 | 推荐度 |
|------|------|------|--------|
| COS直连URL | 立即可用，稳定 | URL不够友好 | ⭐⭐⭐⭐ |
| 自定义域名 | 永久稳定，专业 | 需要备案域名 | ⭐⭐⭐⭐⭐ |
| 升级付费版 | 官方支持，功能全 | 需要付费 | ⭐⭐⭐⭐ |
| 其他云平台 | 替代方案 | 需要重新部署 | ⭐⭐⭐ |

**推荐**: 先使用COS直连URL，同时配置自定义域名，最终使用自定义域名访问。
